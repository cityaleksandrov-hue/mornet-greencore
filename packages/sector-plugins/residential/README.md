# Residential Sector Plugin

**–°–µ–∫—Ç–æ—Ä:** –ñ–∏–ª–∞—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å (–¥–æ–º–æ—Ö–æ–∑—è–π—Å—Ç–≤–∞)  
**–¢–∏–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤:** E (—ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è), H (–æ—Ç–æ–ø–ª–µ–Ω–∏–µ), W (–≤–æ–¥–∞)  
**–°—Ç–∞—Ç—É—Å:** üü¢ MVP 1.0 (Q1 2026)

## –û–ø–∏—Å–∞–Ω–∏–µ

Residential Plugin - —ç—Ç–æ sector-specific –º–æ–¥—É–ª—å –¥–ª—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –∂–∏–ª–æ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ (–¥–æ–º–æ—Ö–æ–∑—è–π—Å—Ç–≤–∞, –∫–≤–∞—Ä—Ç–∏—Ä—ã, —á–∞—Å—Ç–Ω—ã–µ –¥–æ–º–∞).

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### E - –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** Wi-Fi —Ä–æ–∑–µ—Ç–∫–∏ (Tapo P110, Sonoff POW R3), —É–º–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏
- **–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è:** –∫–í—Ç¬∑—á
- **–¢–∞—Ä–∏—Ñ—ã:** –¥–Ω–µ–≤–Ω–æ–π/–Ω–æ—á–Ω–æ–π (T1/T2)
- **–¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è:** 1 –∫–í—Ç¬∑—á = 1 E token

### H - –û—Ç–æ–ø–ª–µ–Ω–∏–µ
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** –ì–∞–∑–æ–≤—ã–µ —Å—á—ë—Ç—á–∏–∫–∏, —Ç–µ–ø–ª–æ–≤—ã–µ —Å—á—ë—Ç—á–∏–∫–∏
- **–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è:** –º¬≥ (–≥–∞–∑), –ì–∫–∞–ª (—Ç–µ–ø–ª–æ)
- **–¢–∞—Ä–∏—Ñ—ã:** —Å–µ–∑–æ–Ω–Ω—ã–µ (–∑–∏–º–∞/–ª–µ—Ç–æ)
- **–¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è:** 1 –º¬≥ –≥–∞–∑–∞ = 0.6 H tokens

### W - –í–æ–¥–∞
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** –í–æ–¥—è–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏
- **–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è:** –º¬≥
- **–¢–∞—Ä–∏—Ñ—ã:** —Ö–æ–ª–æ–¥–Ω–∞—è/–≥–æ—Ä—è—á–∞—è –≤–æ–¥–∞
- **–¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è:** 1 –º¬≥ –≤–æ–¥—ã = 0.4 W tokens

## –¢–∏–ø–∏—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –≠–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–±–æ—Ä—ã:
- –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫ (24/7, 100-200 –í—Ç)
- –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ (1-2 —Ü–∏–∫–ª–∞/–¥–µ–Ω—å, 1-2 –∫–í—Ç)
- –ü–æ—Å—É–¥–æ–º–æ–µ—á–Ω–∞—è –º–∞—à–∏–Ω–∞ (1 —Ü–∏–∫–ª/–¥–µ–Ω—å, 1-1.5 –∫–í—Ç)
- –î—É—Ö–æ–≤–∫–∞ (30-60 –º–∏–Ω/–¥–µ–Ω—å, 2-3 –∫–í—Ç)
- –ß–∞–π–Ω–∏–∫ (5-10 —Ä–∞–∑/–¥–µ–Ω—å, 2 –∫–í—Ç)
- –¢–µ–ª–µ–≤–∏–∑–æ—Ä (4-8 —á–∞—Å–æ–≤/–¥–µ–Ω—å, 100-200 –í—Ç)
- –ö–æ–º–ø—å—é—Ç–µ—Ä (8-12 —á–∞—Å–æ–≤/–¥–µ–Ω—å, 300-500 –í—Ç)
- –û—Å–≤–µ—â–µ–Ω–∏–µ (LED, 5-50 –í—Ç –Ω–∞ –ª–∞–º–ø—É)

### –û—Ç–æ–ø–ª–µ–Ω–∏–µ:
- –ì–∞–∑–æ–≤—ã–π –∫–æ—Ç—ë–ª (–∑–∏–º–∞: 10-20 –º¬≥/–¥–µ–Ω—å, –ª–µ—Ç–æ: 2-5 –º¬≥/–¥–µ–Ω—å)
- –ë–æ–π–ª–µ—Ä (–Ω–∞–≥—Ä–µ–≤ –≤–æ–¥—ã, 2-5 –º¬≥/–¥–µ–Ω—å)
- –†–∞–¥–∏–∞—Ç–æ—Ä—ã (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã)

### –í–æ–¥–∞:
- –î—É—à (50-100 –ª/–¥–µ–Ω—å –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞)
- –¢—É–∞–ª–µ—Ç (6-12 –ª –Ω–∞ —Å–º—ã–≤)
- –ú–æ–π–∫–∞ –ø–æ—Å—É–¥—ã (10-20 –ª/–¥–µ–Ω—å)
- –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ (40-60 –ª –Ω–∞ —Ü–∏–∫–ª)

## –°–ª–æ—Ç–æ–≤—ã–π —É—á—ë—Ç

### –¢–∏–ø–∏—á–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –¥–æ–º–æ—Ö–æ–∑—è–π—Å—Ç–≤–∞:

| –°–ª–æ—Ç | –ü–µ—Ä–∏–æ–¥ | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ | –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ |
|------|--------|------------|-------------|
| S1 | 00:00‚Äì06:00 | –°–æ–Ω, —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫, –æ—Ç–æ–ø–ª–µ–Ω–∏–µ | –ù–∏–∑–∫–æ–µ |
| S2 | 06:00‚Äì09:00 | –£—Ç—Ä–æ: –¥—É—à, –∑–∞–≤—Ç—Ä–∞–∫, —á–∞–π–Ω–∏–∫ | –°—Ä–µ–¥–Ω–µ–µ |
| S3 | 09:00‚Äì17:00 | –î–µ–Ω—å: —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫, –æ—Ç–æ–ø–ª–µ–Ω–∏–µ | –ù–∏–∑–∫–æ–µ |
| S4 | 17:00‚Äì20:00 | –í–µ—á–µ—Ä: –≥–æ—Ç–æ–≤–∫–∞, –¥—É—à, –¢–í | –í—ã—Å–æ–∫–æ–µ |
| S5 | 20:00‚Äì23:00 | –ü–æ–∑–¥–Ω–∏–π –≤–µ—á–µ—Ä: –¢–í, –∫–æ–º–ø—å—é—Ç–µ—Ä | –°—Ä–µ–¥–Ω–µ–µ |
| S6 | 23:00‚Äì00:00 | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ —Å–Ω—É | –ù–∏–∑–∫–æ–µ |

## –§–æ—Ä–º—É–ª—ã —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏

### –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è (E)
```
E_tokens = ŒîE √ó K_time
–≥–¥–µ:
- ŒîE - –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ (–∫–í—Ç¬∑—á)
- K_time = 1.0 (–¥–µ–Ω—å), 0.7 (–Ω–æ—á—å)
```

### –û—Ç–æ–ø–ª–µ–Ω–∏–µ (H)
```
H_tokens = ŒîH √ó K_efficiency √ó K_season
–≥–¥–µ:
- ŒîH - –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≥–∞–∑–∞ (–º¬≥)
- K_efficiency = 0.6 (–ö–ü–î –∫–æ—Ç–ª–∞)
- K_season = 1.0 (–∑–∏–º–∞), 0.5 (–ª–µ—Ç–æ)
```

### –í–æ–¥–∞ (W)
```
W_tokens = ŒîW √ó K_type
–≥–¥–µ:
- ŒîW - –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≤–æ–¥—ã (–º¬≥)
- K_type = 0.4 (—Ö–æ–ª–æ–¥–Ω–∞—è), 0.6 (–≥–æ—Ä—è—á–∞—è)
```

## –ü—Ä–∏–º–µ—Ä: SmartHome Node 01, Slot S5

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏—è: 2.90 –∫–í—Ç¬∑—á
- –ì–∞–∑: 2.437 –º¬≥
- –í–æ–¥–∞: 0.09 –º¬≥

**–†–∞—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤:**
```
E_tokens = 2.90 √ó 1.0 = 2.90 E
H_tokens = 2.437 √ó 0.6 √ó 1.0 = 1.46 H
W_tokens = 0.09 √ó 0.4 = 0.036 W

GCM = E + H + W = 2.90 + 1.46 + 0.036 = 4.40 GCM
```

**–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å:**
```
Cost_E = 2.90 √ó 5.69 ‚ÇΩ/–∫–í—Ç¬∑—á = 16.50 ‚ÇΩ
Cost_H = 2.437 √ó 5.99 ‚ÇΩ/–º¬≥ = 14.60 ‚ÇΩ
Cost_W = 0.09 √ó 40.00 ‚ÇΩ/–º¬≥ = 3.60 ‚ÇΩ

Total = 34.70 ‚ÇΩ
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Edge Agent

### MQTT Topics:
```
SmartHome_Node01/telemetry/electricity
SmartHome_Node01/telemetry/gas
SmartHome_Node01/telemetry/water
SmartHome_Node01/telemetry/temperature
SmartHome_Node01/telemetry/system
```

### Payload Example:
```json
{
  "nodeId": "SmartHome_Node01",
  "timestamp": "2025-10-16T20:28:00Z",
  "slotId": "S5",
  "resources": {
    "electricity": {
      "consumption": 2.90,
      "unit": "kWh"
    },
    "gas": {
      "consumption": 2.437,
      "unit": "m3"
    },
    "water": {
      "consumption": 0.09,
      "unit": "m3"
    }
  },
  "temperature": {
    "cpu": 43.0,
    "ambient": 22.0
  }
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### package.json
```json
{
  "name": "@mornet/sector-plugin-residential",
  "version": "0.1.0",
  "description": "Residential sector plugin for MorNet GreenCore",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "build": "tsc",
    "dev": "tsc --watch",
    "test": "jest"
  },
  "dependencies": {
    "@mornet/shared": "workspace:*"
  },
  "devDependencies": {
    "typescript": "^5.0.0",
    "jest": "^29.0.0"
  }
}
```

### TypeScript Types
```typescript
export interface ResidentialTelemetry {
  nodeId: string;
  timestamp: Date;
  slotId: string;
  electricity: {
    consumption: number; // kWh
    unit: 'kWh';
  };
  gas: {
    consumption: number; // m¬≥
    unit: 'm3';
  };
  water: {
    consumption: number; // m¬≥
    unit: 'm3';
  };
  temperature?: {
    cpu: number;
    ambient: number;
  };
}

export interface ResidentialTokens {
  E: number;
  H: number;
  W: number;
  GCM: number;
}

export interface ResidentialCost {
  E: number; // RUB
  H: number; // RUB
  W: number; // RUB
  total: number; // RUB
}
```

## –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **–í–µ—Ä—Å–∏—è:** 0.1.0 (MVP)
- **–°—Ç–∞—Ç—É—Å:** üü° –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 0%

## Roadmap

### MVP 1.0 (Q1 2026)
- [x] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–∏–∑–∞–π–Ω
- [ ] –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (E/H/W)
- [ ] –§–æ—Ä–º—É–ª—ã —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cost Engine
- [ ] Unit —Ç–µ—Å—Ç—ã

### v1.1 (Q2 2026)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º—É–ª
- [ ] ML-–º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è

### v1.2 (Q3 2026)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —É–º–Ω—ã–º–∏ —Å—á—ë—Ç—á–∏–∫–∞–º–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- [ ] –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [Pre-Development Architecture](../../../docs/architecture/pre-development-architecture.md)  
**–ö–æ–º–∞–Ω–¥–∞:** Backend Team  
**–ö–æ–Ω—Ç–∞–∫—Ç:** backend@mornet.io

